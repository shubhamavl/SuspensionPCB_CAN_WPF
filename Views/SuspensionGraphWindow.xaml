<Window x:Class="SuspensionPCB_CAN_WPF.Views.SuspensionGraphWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Suspension Test Graphs" Height="700" Width="1200"
        WindowStartupLocation="CenterOwner" ResizeMode="CanResize"
        Background="#FFF5F5F5" Icon="pack://application:,,,/Assets/AVL_Icon.ico">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBlue}" Padding="15,10">
            <Grid>
                <TextBlock Text="ðŸ“Š Suspension Test Graphs" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White" 
                           VerticalAlignment="Center"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Ellipse x:Name="ConnectionIndicator" Width="12" Height="12" 
                             Fill="#FFDC3545" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock x:Name="ConnectionStatusText" Text="Disconnected" 
                               Foreground="White" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBlock x:Name="DataRateText" Text="Rate: --" 
                               Foreground="White" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Status Info Panel -->
        <Border Grid.Row="1" Background="#FFF0F0F0" BorderBrush="#FFCCCCCC" 
                BorderThickness="0,0,0,1" Padding="10,5">
            <StackPanel>
                <!-- First Row: Side, Weight, Samples -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,5">
                    <TextBlock x:Name="ActiveSideLabel" Text="Left Side:" FontWeight="SemiBold" Margin="0,0,5,0"/>
                    <Ellipse x:Name="ActiveSideIndicator" Width="10" Height="10" Fill="#FF27AE60" Margin="0,0,10,0"/>
                    <TextBlock x:Name="LeftWeightText" Text="-- kg" Margin="0,0,20,0"/>
                    <TextBlock x:Name="RightWeightText" Text="-- kg" Margin="0,0,20,0"/>
                    <TextBlock Text="Samples:" FontWeight="SemiBold" Margin="0,0,5,0"/>
                    <TextBlock x:Name="SampleCountText" Text="0" Margin="0,0,20,0"/>
                    <TextBlock x:Name="YAxisRangeText" Text="Y: 0-1000 kg" FontSize="10" Foreground="#FF6C757D"/>
                </StackPanel>
                <!-- Second Row: Min/Max, Efficiency, Pass/Fail -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock x:Name="MinWeightText" Text="Min: --" FontWeight="SemiBold" Foreground="#FF3498DB" Margin="0,0,15,0"/>
                    <TextBlock x:Name="MaxWeightText" Text="Max: --" FontWeight="SemiBold" Foreground="#FFE74C3C" Margin="0,0,15,0"/>
                    <TextBlock x:Name="EfficiencyText" Text="Efficiency: --" FontWeight="SemiBold" Foreground="#FF9B59B6" Margin="0,0,15,0"/>
                    <TextBlock x:Name="TestResultText" Text="Result: Not Tested" FontWeight="Bold" FontSize="14" Margin="0,0,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Graph Area -->
        <Grid x:Name="chartContainer" Grid.Row="2" Margin="10"/>

        <!-- Control Panel -->
        <Border Grid.Row="3" Background="#FFF0F0F0" BorderBrush="#FFCCCCCC" 
                BorderThickness="0,1,0,0" Padding="10">
            <StackPanel>
                <!-- Primary Controls Row -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,5">
                    <Button x:Name="StartTestBtn" Content="â–¶ Start Test" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF28A745" Click="StartTestBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Start test tracking (captures initial weight for efficiency calculation)"/>
                    <Button x:Name="StopTestBtn" Content="â¹ Stop Test" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FFDC3545" Click="StopTestBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Stop test and calculate efficiency"/>
                    <Button x:Name="PauseBtn" Content="â¸ Pause" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF17A2B8" Click="PauseBtn_Click" 
                            Width="100" Height="32" Margin="5,0"/>
                    <Button x:Name="ResumeBtn" Content="â–¶ Resume" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF28A745" Click="ResumeBtn_Click" 
                            Width="100" Height="32" Margin="5,0" IsEnabled="False"/>
                    <Button x:Name="SwitchSideBtn" Content="ðŸ”„ Switch Side" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF9B59B6" Click="SwitchSide_Click" 
                            Width="120" Height="32" Margin="5,0"
                            ToolTip="Switch between Left and Right side display"/>
                    <Button x:Name="ClearBtn" Content="ðŸ—‘ Clear" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF95A5A6" Click="ClearBtn_Click" 
                            Width="100" Height="32" Margin="5,0"/>
                    <Button x:Name="ExportBtn" Content="ðŸ’¾ Export CSV" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF6F42C1" Click="ExportBtn_Click" 
                            Width="120" Height="32" Margin="5,0"/>
                    <Button x:Name="SaveTestDataBtn" Content="ðŸ’¾ Save Test" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF27AE60" Click="SaveTestDataBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Save test data to JSON file (database-like)"/>
                </StackPanel>
                
                <!-- Separator -->
                <Separator Margin="0,5"/>
                
                <!-- Axis and Display Controls Row -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5,0,5">
                    <Button x:Name="YAxisModeToggle" Content="Y: Auto" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF27AE60" Click="YAxisModeToggle_Click" 
                            Width="90" Height="32" Margin="5,0"
                            ToolTip="Toggle between Auto-scale and Fixed range Y-axis"/>
                    <Button x:Name="WeightBasedYAxisToggle" Content="Y: Weight-Based" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FFFFC107" Click="WeightBasedYAxisToggle_Click" 
                            Width="130" Height="32" Margin="5,0"
                            ToolTip="Toggle weight-based Y-axis (center around initial weight Â±400 kg, like AVL LMSV1.0)"/>
                    <Button x:Name="XAxisModeToggle" Content="X: Samples" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF6C757D" Click="XAxisModeToggle_Click" 
                            Width="100" Height="32" Margin="5,0"
                            ToolTip="Toggle between Sample-based and Time-based X-axis"/>
                    <Button x:Name="LegendToggle" Content="Legend: On" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF17A2B8" Click="LegendToggle_Click" 
                            Width="100" Height="32" Margin="5,0"
                            ToolTip="Show/Hide chart legend"/>
                </StackPanel>
                
                <!-- Separator -->
                <Separator Margin="0,5"/>
                
                <!-- Zoom Controls Row -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button x:Name="ZoomInBtn" Content="ðŸ”+ Zoom In" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF3498DB" Click="ZoomInBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Zoom in on the chart"/>
                    <Button x:Name="ZoomOutBtn" Content="ðŸ”- Zoom Out" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF3498DB" Click="ZoomOutBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Zoom out on the chart"/>
                    <Button x:Name="ResetViewBtn" Content="â†º Reset View" 
                            Style="{StaticResource ModernButton}" 
                            Background="#FF95A5A6" Click="ResetViewBtn_Click" 
                            Width="110" Height="32" Margin="5,0"
                            ToolTip="Reset zoom and pan to default view"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Window>

