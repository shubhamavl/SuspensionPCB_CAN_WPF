<Window x:Class="SuspensionPCB_CAN_WPF.SinglePageCalibration"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="LMV Suspension Calibration - v0.6" 
        Height="800" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#F8F9FA"
        Loaded="Window_Loaded">

    <Window.Resources>
        <!-- Modern Button Styles -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#2E5984"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1E4A6B"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#0F3A5A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SuccessButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="#28A745"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#218838"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="WarningButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="#FFC107"/>
            <Setter Property="Foreground" Value="#212529"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E0A800"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DangerButton" TargetType="Button" BasedOn="{StaticResource PrimaryButton}">
            <Setter Property="Background" Value="#DC3545"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#C82333"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Card Style -->
        <Style x:Key="CardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E9ECEF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="2" Direction="320" Color="Black" Opacity="0.1" BlurRadius="8"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section Header Style -->
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <!-- Status Indicator Style -->
        <Style x:Key="StatusIndicator" TargetType="Ellipse">
            <Setter Property="Width" Value="12"/>
            <Setter Property="Height" Value="12"/>
            <Setter Property="Margin" Value="5,0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2E5984" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock Text="LMV Suspension Calibration System" 
                               FontSize="24" FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="CAN Protocol v0.6 - Single Page Interface" 
                               FontSize="14" Foreground="#BDC3C7" 
                               Margin="0,5,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Status:" Foreground="White" VerticalAlignment="Center"/>
                        <Ellipse x:Name="ConnectionStatus" Style="{StaticResource StatusIndicator}" 
                                 Fill="#DC3545"/>
                        <TextBlock x:Name="ConnectionStatusText" Text="Disconnected" 
                                   Foreground="White" VerticalAlignment="Center"/>
                    </StackPanel>
                    <TextBlock x:Name="CalibrationStatusText" Text="Ready to Start" 
                               FontSize="12" Foreground="#BDC3C7" 
                               HorizontalAlignment="Right" Margin="0,5,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column: Configuration & Setup -->
                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    
                    <!-- Calibration Configuration Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Calibration Configuration" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Channel Selection -->
                            <TextBlock Text="Channels" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <UniformGrid Columns="4" Margin="0,0,0,15">
                                <CheckBox x:Name="Ch1Check" Content="Ch1" Margin="2" IsChecked="True"/>
                                <CheckBox x:Name="Ch2Check" Content="Ch2" Margin="2" IsChecked="True"/>
                                <CheckBox x:Name="Ch3Check" Content="Ch3" Margin="2" IsChecked="True"/>
                                <CheckBox x:Name="Ch4Check" Content="Ch4" Margin="2" IsChecked="True"/>
                            </UniformGrid>

                            <!-- Max Weight -->
                            <TextBlock Text="Maximum Weight (kg)" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <TextBox x:Name="MaxWeightInput" Text="1000.0" FontSize="14" 
                                     Padding="10,8" BorderBrush="#CED4DA" BorderThickness="1" 
                                     Margin="0,0,0,15"/>

                            <!-- Start Calibration Button -->
                            <Button x:Name="StartCalibrationBtn" Content="Start Calibration" 
                                    Style="{StaticResource SuccessButton}" 
                                    Click="StartCalibration_Click" 
                                    FontSize="14" Padding="20,12"/>
                        </StackPanel>
                    </Border>

                    <!-- Point Management Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Point Management" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Current Point Info -->
                            <Grid Margin="0,0,0,15">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Current Point:" FontWeight="SemiBold"/>
                                <TextBlock x:Name="CurrentPointText" Grid.Column="1" Text="0" 
                                           FontWeight="Bold" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Point Management Buttons -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                <Button x:Name="DeleteLastBtn" Content="Delete Last" 
                                        Style="{StaticResource WarningButton}" 
                                        Click="DeleteLast_Click" Margin="0,0,10,0" 
                                        IsEnabled="False"/>
                                <Button x:Name="ResetSessionBtn" Content="Reset Session" 
                                        Style="{StaticResource DangerButton}" 
                                        Click="ResetSession_Click" 
                                        IsEnabled="False"/>
                            </StackPanel>

                            <!-- Point Count Display -->
                            <Border Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="1" 
                                    CornerRadius="4" Padding="10" Margin="0,0,0,15">
                                <TextBlock x:Name="PointCountText" Text="Points Collected: 0" 
                                           FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </Border>

                            <!-- Calibration Points List -->
                            <Border Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="1" 
                                    CornerRadius="4" Padding="10">
                                <StackPanel>
                                    <TextBlock Text="Calibration Points" FontWeight="SemiBold" 
                                               HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                    
                                    <ListView x:Name="CalibrationPointsList" Height="200" 
                                              Background="White" BorderBrush="#DEE2E6" BorderThickness="1">
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="Point" Width="60">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding PointIndex}" 
                                                                       HorizontalAlignment="Center" 
                                                                       FontWeight="SemiBold"/>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                                <GridViewColumn Header="Weight (kg)" Width="80">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding Weight, StringFormat=F1}" 
                                                                       HorizontalAlignment="Center"/>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                                <GridViewColumn Header="ADC" Width="80">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding ADCValue}" 
                                                                       HorizontalAlignment="Center"/>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                                <GridViewColumn Header="Action" Width="80">
                                                    <GridViewColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Button Content="Delete" 
                                                                    Background="#DC3545" 
                                                                    Foreground="White" 
                                                                    BorderThickness="0" 
                                                                    Padding="8,2" 
                                                                    FontSize="10"
                                                                    Click="DeleteSpecificPoint_Click"
                                                                    Tag="{Binding PointIndex}"/>
                                                        </DataTemplate>
                                                    </GridViewColumn.CellTemplate>
                                                </GridViewColumn>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                    
                                    <TextBlock Text="Click 'Delete' to remove a specific point" 
                                               FontSize="10" FontStyle="Italic" 
                                               Foreground="#6C757D" 
                                               HorizontalAlignment="Center" 
                                               Margin="0,5,0,0"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Calibration Actions Card -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Calibration Actions" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Complete Calibration -->
                            <Button x:Name="CompleteCalibrationBtn" Content="Complete Calibration" 
                                    Style="{StaticResource PrimaryButton}" 
                                    Click="CompleteCalibration_Click" 
                                    Margin="0,0,0,10" IsEnabled="False"/>
                            
                            <!-- Cancel Calibration -->
                            <Button x:Name="CancelCalibrationBtn" Content="Cancel Calibration" 
                                    Style="{StaticResource DangerButton}" 
                                    Click="CancelCalibration_Click" 
                                    IsEnabled="False"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Center Column: Weight Input & Capture -->
                <StackPanel Grid.Column="1" Margin="10,0">
                    
                    <!-- Target Weight Input Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Target Weight Input" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Weight Input -->
                            <Border Background="#F8F9FA" BorderBrush="#28A745" BorderThickness="2" 
                                    CornerRadius="6" Padding="20" Margin="0,0,0,15">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="Enter Target Weight" FontSize="14" FontWeight="SemiBold" 
                                               Foreground="#155724" Margin="0,0,0,10"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBox x:Name="WeightInput" Text="" FontSize="28" FontWeight="Bold"
                                                 Width="150" TextAlignment="Center" BorderThickness="0" 
                                                 Background="Transparent" KeyDown="WeightInput_KeyDown"
                                                 GotFocus="WeightInput_GotFocus" LostFocus="WeightInput_LostFocus"/>
                                        <TextBlock Text="kg" FontSize="20" Foreground="#6C757D" 
                                                   VerticalAlignment="Bottom" Margin="10,0,0,0"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Set Target Button -->
                            <Button x:Name="SetTargetBtn" Content="Set as Target Weight" 
                                    Style="{StaticResource SuccessButton}" 
                                    Click="SetTarget_Click" FontSize="14" Padding="20,10"/>
                        </StackPanel>
                    </Border>

                    <!-- Current Reading Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Current Weight Reading" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Current Weight Display -->
                            <Border x:Name="CurrentWeightBorder" Background="#E8F5E8" BorderBrush="#28A745" 
                                    BorderThickness="2" CornerRadius="8" Padding="30" Margin="0,0,0,15">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="Current Total Weight" FontSize="16" 
                                               Foreground="#155724" HorizontalAlignment="Center"/>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                                        <TextBlock x:Name="CurrentWeightText" Text="0.0" FontSize="48" 
                                                   FontWeight="Bold" Foreground="#155724"/>
                                        <TextBlock Text="kg" FontSize="24" Foreground="#155724" 
                                                   VerticalAlignment="Bottom" Margin="10,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock x:Name="StabilityText" Text="Waiting for data..." 
                                               FontSize="14" FontWeight="Bold" Foreground="#28A745" 
                                               HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </StackPanel>
                            </Border>

                            <!-- Capture Button -->
                            <Button x:Name="CapturePointBtn" Content="Capture This Point" 
                                    Style="{StaticResource SuccessButton}" 
                                    Click="CapturePoint_Click" FontSize="16" Padding="25,15" 
                                    IsEnabled="False"/>
                        </StackPanel>
                    </Border>

                    <!-- Load Cell Data Card -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="Load Cell Readings" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Load Cell Grid -->
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Front Left -->
                                <Border Grid.Row="0" Grid.Column="0" Background="#F8F9FA" 
                                        BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" 
                                        Padding="10" Margin="2">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Front Left" FontSize="10" FontWeight="Bold" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="FLWeightText" Text="0.0 kg" FontSize="12" 
                                                   FontWeight="Bold" Foreground="#2C3E50"/>
                                        <TextBlock x:Name="FLADCText" Text="ADC: 0" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="FLVoltageText" Text="0.00V" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>

                                <!-- Front Right -->
                                <Border Grid.Row="0" Grid.Column="1" Background="#F8F9FA" 
                                        BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" 
                                        Padding="10" Margin="2">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Front Right" FontSize="10" FontWeight="Bold" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="FRWeightText" Text="0.0 kg" FontSize="12" 
                                                   FontWeight="Bold" Foreground="#2C3E50"/>
                                        <TextBlock x:Name="FRADCText" Text="ADC: 0" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="FRVoltageText" Text="0.00V" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>

                                <!-- Rear Left -->
                                <Border Grid.Row="1" Grid.Column="0" Background="#F8F9FA" 
                                        BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" 
                                        Padding="10" Margin="2">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Rear Left" FontSize="10" FontWeight="Bold" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="RLWeightText" Text="0.0 kg" FontSize="12" 
                                                   FontWeight="Bold" Foreground="#2C3E50"/>
                                        <TextBlock x:Name="RLADCText" Text="ADC: 0" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="RLVoltageText" Text="0.00V" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>

                                <!-- Rear Right -->
                                <Border Grid.Row="1" Grid.Column="1" Background="#F8F9FA" 
                                        BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" 
                                        Padding="10" Margin="2">
                                    <StackPanel HorizontalAlignment="Center">
                                        <TextBlock Text="Rear Right" FontSize="10" FontWeight="Bold" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="RRWeightText" Text="0.0 kg" FontSize="12" 
                                                   FontWeight="Bold" Foreground="#2C3E50"/>
                                        <TextBlock x:Name="RRADCText" Text="ADC: 0" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                        <TextBlock x:Name="RRVoltageText" Text="0.00V" FontSize="9" 
                                                   Foreground="#6C757D"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Column: Progress & Status -->
                <StackPanel Grid.Column="2" Margin="10,0,0,0">
                    
                    <!-- Calibration Progress Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Calibration Progress" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Progress Bar -->
                            <ProgressBar x:Name="CalibrationProgress" Height="20" 
                                         Value="0" Maximum="100" 
                                         Background="#E9ECEF" Foreground="#28A745" 
                                         Margin="0,0,0,10"/>
                            
                            <!-- Progress Text -->
                            <TextBlock x:Name="ProgressText" Text="Ready to start calibration" 
                                       FontSize="14" FontWeight="SemiBold" 
                                       HorizontalAlignment="Center" Margin="0,0,0,15"/>
                            
                            <!-- Target Weight Display -->
                            <Border x:Name="TargetWeightBorder" Background="#D4EDDA" 
                                    BorderBrush="#28A745" BorderThickness="1" CornerRadius="4" 
                                    Padding="15" Visibility="Collapsed">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="Target Weight" FontSize="12" 
                                               Foreground="#155724" HorizontalAlignment="Center"/>
                                    <TextBlock x:Name="TargetWeightText" Text="0.0 kg" FontSize="20" 
                                               FontWeight="Bold" Foreground="#155724" 
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Calibration Quality Card -->
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Calibration Quality" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Quality Metrics -->
                            <Grid Margin="0,0,0,10">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Accuracy:" FontWeight="SemiBold"/>
                                <TextBlock x:Name="AccuracyText" Grid.Row="0" Grid.Column="1" Text="--" 
                                           HorizontalAlignment="Right"/>
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Max Error:" FontWeight="SemiBold"/>
                                <TextBlock x:Name="MaxErrorText" Grid.Row="1" Grid.Column="1" Text="--" 
                                           HorizontalAlignment="Right"/>
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Grade:" FontWeight="SemiBold"/>
                                <TextBlock x:Name="GradeText" Grid.Row="2" Grid.Column="1" Text="--" 
                                           HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Quality Status -->
                            <Border x:Name="QualityStatusBorder" Background="#F8F9FA" 
                                    BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" 
                                    Padding="10" Visibility="Collapsed">
                                <TextBlock x:Name="QualityStatusText" Text="" FontSize="12" 
                                           HorizontalAlignment="Center"/>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- System Status Card -->
                    <Border Style="{StaticResource CardStyle}">
                        <StackPanel>
                            <TextBlock Text="System Status" Style="{StaticResource SectionHeader}"/>
                            
                            <!-- Status Items -->
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <TextBlock Text="CAN Connection:" FontWeight="SemiBold"/>
                                    <TextBlock x:Name="CANStatusText" Text="Disconnected" 
                                               HorizontalAlignment="Right" Foreground="#DC3545"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,8">
                                    <TextBlock Text="Data Rate:" FontWeight="SemiBold"/>
                                    <TextBlock x:Name="DataRateText" Text="--" 
                                               HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid Margin="0,0,0,8">
                                    <TextBlock Text="Last Update:" FontWeight="SemiBold"/>
                                    <TextBlock x:Name="LastUpdateText" Text="--" 
                                               HorizontalAlignment="Right"/>
                                </Grid>
                                
                                <Grid>
                                    <TextBlock Text="Calibration Mode:" FontWeight="SemiBold"/>
                                    <TextBlock Text="Weight-based (v0.6)" 
                                               HorizontalAlignment="Right" Foreground="#28A745"/>
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Bottom Status Bar -->
        <Border Grid.Row="2" Background="White" BorderBrush="#E9ECEF" BorderThickness="0,1,0,0">
            <Grid Margin="20,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="StatusMessageText" Text="Ready to start calibration" 
                           FontSize="13" VerticalAlignment="Center"/>
                
                <TextBlock x:Name="TimestampText" Text="" FontSize="12" 
                           Foreground="#6C757D" Grid.Column="1" VerticalAlignment="Center"/>
            </Grid>
        </Border>
    </Grid>
</Window>
